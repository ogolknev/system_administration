# Конспект 1
## Системное и сетевое администрирование. Практическое руководство. Второе издание
### Глава 3

При правильном обслуживании рабочих станций у новых сотрудников с первого дня на работе будет все необходимое, включая основную инфраструктуру.

Обслуживание операционных систем на рабочих станциях сводится к выполнению трех основных задач: первоначальная установка системного программного обеспечения и приложений, обновление системного программного обеспечения и приложений, настройка сетевых параметров. Мы называем эти задачи «большой тройкой». Если вам не удастся должным образом решить эти три задачи, остальная ваша работа значительно осложнится, а автоматизация этих задач значительно изменит ситуацию к лучшему.

**Рабочая станция может находиться в пяти состояниях:**
- **Новое состояние** относится к совершенно новой машине.
- **Чистое состояние** относится к машине с установленной, но еще не настроенной ОС.
- **Сконфигурированное состояние** означает, что система настроена и функцио­нирует должным образом.
- **Неизвестное состояние** относится к компьютеру, который был неправильно сконфигурирован или конфигурация которого устарела.
- **Отключенное состояние** относится к машине, которая была списана и отключена.
  
Какую информацию мы можем получить из этой схемы?

Во-первых, необходимо признать, что существуют различные состояния и переходы. Не стоит удивляться каждому сбою. Необходимо разработать план исправления.

Во-вторых, видно, что, несмотря на существование нескольких видов состояний, компьютер можно использовать только в сконфигурированном состоянии. Необходимо до максимума увеличить время, проводимое в этом состоянии.Чтобы продлить время пребывания компьютера в сконфигурированном состоянии, необходимо сделать так, чтобы деградация ОС протекала как можно медленнее. Архитектурное решение, принятое системным администратором, может усилить или ослабить целостность операционной системы. Системные администраторы должны найти необходимый баланс между предоставлением пользователям полного доступа и ограничением их прав. Этот баланс влияет на скорость разрушения операционной системы.

И наконец, эта модель показывает, что машины в конце концов списываются. И этому не стоит удивляться: машины не могут работать вечно.

#### 3.1 Основы

С обслуживанием операционных систем рабочей станции связаны три критически важных аспекта:

1. Первоначальная установка системного ПО и приложений.
2. Обновление системного ПО и приложений.
3. Настройка сетевых параметров.

Если вы хотите, чтобы управление вашей сетью производилось с минимальными затратами, эти три задачи необходимо автоматизировать для любой платформы, которая используется в вашей сети.

«Привилегированные объекты» – платформы, которые должны получать полноценную поддержку. Платформа может получить статус «привилегированного объекта» по целому ряду причин. По запросу пользователей или по инициативе системных администраторов.

##### 3.1.1. Установка ОС. Автоматизация

Автоматизация решает огромное количество проблем, но не все из них являются техническими. Во-первых, автоматизация экономит деньги. Разумеется, одним из основных преимуществ является время, выигранное за счет замены ручных процессов автоматическими. Кроме того, автоматизация устраняет два вида скрытых затрат. Первый относится к ошибкам: при ручном выполнении процессов существует вероятность ошибок. Второй тип скрытых затрат относится к неоднородности. Если вы вручную устанавливаете операционную систему, вы никогда не добьетесь той же конфигурации на другой машине. Никогда.

Самый важный аспект автоматизации заключается в том, что установка должна быть полностью автоматизирована. Процедуру, требующую возвращения человека посреди установки для ответа на тот или иной вопрос, нельзя назвать полностью автоматизированной, и она теряет эффективность.

Частичная автоматизация лучше, чем ее полное отсутствие. До тех пор пока система установки не будет работать идеально, необходимо обеспечить какие-то временные средства для некоторых этапов. Автоматизация оставшегося 1% может занять больше времени, чем автоматизация первых 99%.

##### 3.1.2. Обновление системного ПО и приложений

К сожалению, с течением времени обнаруживаются новые ошибки и новые бреши в системе безопасности, и все их необходимо исправлять. Кроме того, появляются прекрасные новые приложения, которые необходимо устанавливать. Все эти задачи относятся к области **обновления программного обеспечения**. Как и в случае с установкой, процесс обновления можно автоматизировать, сэкономив время и силы.

Системы обновления ПО должны быть достаточно универсальными, чтобы они позволяли устанавливать новые приложения и обновлять уже имеющиеся, а также устанавливать патчи ОС.

Вы можете снизить риск ошибок обновления, применив метод «**одна, несколько, много**».

- *Одна*. Прежде всего установите патч на одну машину. Лучше всего на свою собственную – тогда у вас будет дополнительный стимул все сделать правильно. Если при обновлении возникнут ошибки, вносите в процесс изменения до тех пор, пока он не будет работать на одной машине без ошибок.
- *Несколько*. Далее попробуйте установить патч на несколько других машин. Если это возможно, стоит протестировать автоматизированный процесс обновления на рабочих станциях остальных системных администраторов, прежде чем задействовать машины пользователей. Системные администраторы проявляют чуть больше понимания. Затем протестируйте систему на нескольких машинах дружелюбно настроенных к вам пользователей (не системных администраторов).
- *Много*. Протестировав свою систему и убедившись, что она не уничтожит ничей жесткий диск, начинайте постепенно переходить ко все большим и большим группам пользователей, нетерпимых к риску.

##### 3.1.3. Конфигурирование сети

Третий компонент, необходимый для сетей, объединяющих большое количество рабочих станций, – это способ автоматизации обновления сетевых параметров.  Эта информация может значительно различаться в отдельных подсетях или даже в отдельных узлах сети. А следовательно, такое обновление должно производиться иначе, чем, скажем, установка приложений, когда одно и то же приложение устанавливается на всех узлах сети с одинаковой конфигурацией. Поэтому система автоматизации обновления сетевых параметров обычно создается отдельно от остальных систем. Наиболее распространенная система автоматизации этого процесса – DHCP.

Системы DHCP должны иметь систему шаблонов. Преимущество шаблонов в том, что при внесении изменений на множестве узлов вам нужно будет просто изменить шаблон, что значительно лучше, чем прокручивать длинный список узлов сети, пытаясь найти те, которые требуется изменить. Еще одно преимущество в том, что значительно уменьшается вероятность появления ошибки в синтаксисе, если конфигурационный файл генерируется программой.

Как правило, DHCP назначает отдельный IP-адрес каждому узлу сети. Функция динамической аренды адресов позволяет вам указать диапазон IP-адресов, которые можно присваивать узлам сети. Эти узлы смогут при каждом подключении к сети получать новый IP-адрес. Преимущество в том, то облегчается работа администраторов и повышается удобство для пользователей. Зачастую лучше закрепить конкретный IP-адрес за конкретным узлом сети. Это особенно важно для серверов, чьи IP-адреса прописываются в конфигурационных файлах других узлов, таких как DNS-серверы и межсетевые экраны. Динамическое распределение следует использовать в случаях, когда много узлов конкурируют за малое количество IP-адресов.

Старайтесь не использовать динамический DNS-сервер с DHCP. Эта впечатляющее на первый взгляд свойство излишне усложняет 
систему и создает ненужный риск для безопасности.

Управление сроками аренды DHCP может помочь в распределении обновлений. DHCP клиентам задается определенный набор параметров, который будет использоваться в течение определенного периода времени. По истечении этого периода 
они должны обновить свою аренду. Изменения вносятся во время обновления.

#### 3.2. Тонкости

Существуют автоматизированные процессы, но помимо этого есть и автоматизация процесса. Если мы абсолютно уверены в процессе, мы избавлены от необходимости беспокоиться об ошибках. И поэтому мы начинаем искать новые способы применения этого же процесса.

Если пользователи будут иметь дело со стандартной конфигурацией, вам необходимо вовлечь их в процесс составления спецификаций и разработки1. В идеале пользователи должны принимать участие в процессе разработки с самого начала.

Наличие нескольких стандартных конфигураций может быть прекрасно или ужасно, и именно системный администратор определяет, какой эпитет лучше применим в его случае. Чем больше стандартных конфигураций используется в корпоративной сети, тем труднее все их обслуживать. Однако, если потратить время и создать единую обобщенную систему, способную производить множественные конфигурации и поддаваться масштабированию, вы придете к настоящему успеху.

#### 3.3. Заключение

Мы рассмотрели процессы, связанные с обслуживанием операционных систем на настольных компьютерах. Настольные компьютеры, в отличие 
от серверов, как правило, развертываются в больших количествах, и все они обладают практически одной и той же конфигурацией. У каждого компьютера есть свой жизненный цикл, который начинается с установки ОС и заканчивается в тот момент, когда машину выключают в самый последний раз. В этот период программное обеспечение компьютера постепенно приходит в негодность в результате энтропии, обновляется и заново переустанавливается в начале нового цикла. В идеале все узлы сети, относящиеся к определенной платформе, в начале своего жизненного цикла должны иметь одну и ту же конфигурацию. Обновляться они должны параллельно. Некоторые стадии жизненного цикла важнее для пользователей, чем другие. Мы стремимся увеличить продолжительность более важных стадий и сократить продолжительность менее значительных.

Основу всего, чему посвящена данная глава, составляют три процесса:

1. Первичная установка ОС должна быть автоматизирована.
2. Обновление программного обеспечения должно быть автоматизировано.
3. Конфигурация сети должна администрироваться централизованно с помощью такой системы, как DHCP.

Эти три задачи имеют критическое значение для экономного управления. Грамотное их выполнение позволит всем последующим процессам проходить более гладко.